== Surveillance Station

=== Présentation
Le plugin Surveillance Station permet de commander Surveillance Station en utilisant l’API officielle de Synology.
Et d’afficher la caméra en direct (live) dans un widget.

image::../images/ss2.png[align="center"]

==== Compatibilité :

- DSM 5 et ultérieur
- Surveillance Station 6.2 et ultérieur

==== Données visibles sur le Dashboard :
[horizontal]
- *Live* : permet d’afficher la caméra en direct (redimensionnable avec le crayon, voir FAQ)
- *Activer ou Désactiver* : permet d’activer ou de désactiver une caméra de Surveillance Station (une ou plusieurs caméras)
- *Afficher le statut* : permet d’afficher le statut de la caméra (Désactivée ou Activée)
- *Démarrer et arrêter un enregistrement* : permet de forcer un enregistrement (automatiquement stocké dans Surveillance Station)
- *instantané (Snapshot)* : permet de prendre une capture de la caméra au moment de la demande (automatiquement stocké dans Surveillance Station)
- *Activer ou Désactiver la détection mouvement* : permet d’activer ou de désactiver la détection de mouvement (par Surveillance Station ou par Caméra) SEULEMENT quand la caméra est activée
- *PTZ* : permet de contrôler la caméra si celle-ci est compatible. "Patrouille" et "Position prédéfinie" sont aussi disponiblent par scénario

==== Scénario :
Les commandes sont disponibles lors de la création d’un scénario. Voici des exemples d’utilisations :

- Lors de l’activation/désactivation de votre alarme, il est possible d’activer/désactiver automatiquement les caméras de Surveillance Station.
- Lors d’une détection d’intrusion, quand l’alarme se déclenche. Il est possible de créer un scénario pour forcer l’enregistrement. Et/Ou de prendre un ou plusieurs instantanés.

=== Installation/Configuration
==== Installation
Après avoir installé le plugin via le Market. Vous arrivez automatiquement sur cette page :

image::../images/ss1.png[align="center"]
- Cliquer sur le bouton "Activer"

==== Configuration
Nous allons maintenant paramétrer le plugin.

- *Adresse DNS de votre Synolgy* : adresse/host DNS de votre NAS Synology (DSM), et non l'adresse de Surveillance Station. Cette même adresse doit être accessible de l'extérieur (internet) et de votre réseau local (sinon, seul le live ne fonctionnera pas). Dans le cas d'utilisation d'un IP LAN, la seule fonctionnalité qui ne sera pas possible de l'extérieur : visualiser le Live. Exemples d'adresses : MonSyno.tld, dsm.chezmoi.fr.
- *N° de Port* : N° du port qui est associé à votre adresse (exemple : 443 pour du https)
- *Connexion sécurisée* : à cocher si vous utilisez le https avec un certificat émis et vérifier
- *Identifiant Surveillance Station* : identifiant d'un compte avec les droits : dossier "surveillance" dans "permissions", "Surveillance Station" dans "Applications" et un privilège directeur dans Surveillance Station
- *Mot de passe Surveillance Station* : mot de passe associé à votre identifiant

[IMPORTANT]
Connexion sécurisée doit être utilisée seulement si votre certificat a été émis et vérifiés par une Autorité de Certification. Le plugin n'est pas compatible avec le certificat auto-signé par défaut.

Puis, il suffit de se rendre sur la page d'accueil de configuration du plugin, et de cliquer sur : Synchronisation
Une fois la synchronisation terminée, vos caméras doivent s'afficher dans la zone "Mes caméras de Surveillance Station"

Puis définir pour chaque caméra :

- Objet parent
- Catégorie (optionnelle)
- Activer (Oui, sinon l’équipement ne sera pas utilisable)
- Visible (optionnel si vous ne désirez pas le rendre visible sur le Dashboard. Toutefois, il sera utilisable dans un scénario)

=== Astuce
====Alerter Jeedom d'une détection de Surveillance Station
Il est possible de paramètrer dans Surveillance Station de Synology l'appel d'une url externet (votre Jeedom) en cas d'alerter détection de mouvement. Pour se faire, il faut se rendre dans Surveillance Station, et ajouter une régle d'action.

image::../images/ss10.png[align="center"]

Puis de renseigner l'url de la commande que vous voulez lancer en cas de détection (exemple pour commande avec l'id 915 : http://dns_de_votre_jeedom/core/api/jeeApi.php?apikey=b8F......Hb7&type=cmd&id=915

'''
=== FAQ
include::faq.asciidoc[]
'''
=== Changelog
include::changelog.asciidoc[]
